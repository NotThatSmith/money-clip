var n,t=function(n,t){void 0===n&&(n="keyval-store"),void 0===t&&(t="keyval"),this.storeName=t,this._dbp=new Promise(function(e,r){var o=indexedDB.open(n,1);o.onerror=function(){return r(o.error)},o.onsuccess=function(){return e(o.result)},o.onupgradeneeded=function(){o.result.createObjectStore(t)}})};function e(){return n||(n=new t),n}function r(n,t){return void 0===t&&(t=e()),t._withIDBStore("readwrite",function(t){t.delete(n)})}t.prototype._withIDBStore=function(n,t){var e=this;return this._dbp.then(function(r){return new Promise(function(o,u){var i=r.transaction(e.storeName,n);i.oncomplete=function(){return o()},i.onabort=i.onerror=function(){return u(i.error)},t(i.objectStore(e.storeName))})})};var o=r,u={maxAge:Infinity,version:0,lib:{Store:t,get:function(n,t){var r;return void 0===t&&(t=e()),t._withIDBStore("readonly",function(t){r=t.get(n)}).then(function(){return r.result})},set:function(n,t,r){return void 0===r&&(r=e()),r._withIDBStore("readwrite",function(e){e.put(t,n)})},del:r,clear:function(n){return void 0===n&&(n=e()),n._withIDBStore("readwrite",function(n){n.clear()})},keys:function(n){void 0===n&&(n=e());var t=[];return n._withIDBStore("readonly",function(n){(n.openKeyCursor||n.openCursor).call(n).onsuccess=function(){this.result&&(t.push(this.result.key),this.result.continue())}}).then(function(){return t})}}},i=function(n){return Object.assign({},u,n)},c=function(n,t,e){var r=i(t),o=r.maxAge,u=r.version,c=r.lib;return c.get(n,e).then(JSON.parse).then(function(t){return Date.now()-t.time>o||u!==t.version?(c.del(n,e),null):t.data}).catch(function(){return null})},a=function(n,t,e,r){var o=i(e);return o.lib.set(n,JSON.stringify({version:o.version,time:Date.now(),data:t}),r).catch(function(){return null})},s=function(n,t){var e,r=i(n);return r.lib.keys(t).then(function(n){return e=n,Promise.all(e.map(function(n){return c(n,r,t)}))}).then(function(n){return n.reduce(function(n,t,r){return t&&(n[e[r]]=t),n},{})}).catch(function(){})},f=function(n){var e,r=i(n);return r.name&&(e=new t(r.name,r.name)),{get:function(n){return c(n,r,e)},set:function(n,t){return a(n,t,r,e)},getAll:function(){return s(r,e)},del:function(){return r.lib.del(e)},clear:function(){return r.lib.clear(e)},keys:function(){return r.lib.keys(e)}}};export{o as del,c as get,a as set,s as getAll,f as getConfiguredCache};
//# sourceMappingURL=money-clip.m.js.map
